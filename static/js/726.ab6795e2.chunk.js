"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[726],{726:(s,e,a)=>{a.r(e),a.d(e,{default:()=>K});var r=a(487),l=a(420),i=a(791);const t="Dialogs_dialogs__QWDer",d="Dialogs_dialogs__notSelected__Jvkiv",_="Dialogs_dialogs__messages__AeTPA",c="Dialogs_dialogs__chats__Opjc5",n="Dialogs_dialogs__chats_mobile__eVKav",g="Dialogs_dialogs__messages_container__WdTk1",o="Dialogs_dialogs__messages_mobilecontainer__a834v",A="Dialogs_message__CirTE",u="Dialogs_mymessage__Y9tf2",m="Dialogs_dialogs__user_container__DBF-k",h="Dialogs_dialogs__user_mobilecontainer__vX4D2",D="Dialogs_dialogs__arrow_container__343W6",j="Dialogs_dialogs__user_arrow__Z6Eud",x="Dialogs_dialogs__user__g5xJM",v="Dialogs_dialogs__user_photo__pCTWr",U="Dialogs_dialogs__user_name__sawdv",N="Dialogs_dialogs__addMessages_textarea__AG7mQ",C="Dialogs_dialogs__messages_addMessage__E+qYV",M="Dialogs_dialogs__addMessages_button__oMR8J",E="Dialogs_dialogs__addMessages_icon__YaTao";var I=a(834);const p="Chat_chat__pSHfW",w="Chat_chat__photo__e+h3t",R="Chat_chat__username__OReV2";var f=a(184);const b=s=>(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)("div",{children:(0,f.jsx)("img",{className:w,src:s.photo||I})}),(0,f.jsx)("div",{className:R,children:s.username})]}),S="Message_message__ZY+wS",X="Message_message__inner__YllRJ",B="Message_mymessage__inner__nYWNE",J=s=>(0,f.jsx)("div",{className:S,children:(0,f.jsx)("div",{className:X,children:s.message})}),Y=s=>(0,f.jsx)("div",{className:B,children:s.message});var Q=a(759),k=a(610),W=a(411),y=a(749);const F=i.memo((s=>{(0,i.useEffect)((()=>{s.setChats()}),[]),(0,i.useEffect)((()=>{s.currentUserId&&s.setMessages(s.currentUserId)}),[s.currentUserId]);const e=(0,i.useRef)(null);(0,i.useEffect)((()=>{var s;a&&(null===(s=e.current)||void 0===s||s.scrollIntoView())}),[s.messagesData]);const[a,r]=(0,i.useState)(!0);let l=s.chatsData.map((e=>(0,f.jsx)("li",{onClick:()=>{var a;a=e.id,s.setCurrentUserId(a),s.setCurrentUserData(e.userName,e.photos.large),(0,W.j)(e.id)},children:(0,f.jsx)(b,{username:e.userName,photo:e.photos.large})}))),N=s.messagesData.map((e=>e.senderId===s.id?(0,f.jsx)("div",{className:u,children:(0,f.jsx)(Y,{message:e.body})}):(0,f.jsx)("div",{className:A,children:(0,f.jsx)(J,{message:e.body})})));return(0,f.jsxs)(f.Fragment,{children:[s.currentUserId?null:(0,f.jsx)(y.Z,{}),(0,f.jsxs)("div",{className:t,children:[(0,f.jsx)("ul",{className:s.currentUserId?c:n,children:l}),s.currentUserId?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:s.currentUserData?h:m,children:(0,f.jsxs)("div",{className:x,children:[s.currentUserData?(0,f.jsx)("div",{className:D,children:(0,f.jsx)("img",{className:j,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVR4nO3czUoDMRgF0D6ILtW9LvSZ/XssXWlbX+DK0BEEaY3Q+EXnHCh013DvNCkzSVcrAAAAAAAAAACAfyjJRZK7JE/za3p/Xj2uJYX/mq/WSa6rx/fvZXe177NRQmdJng8U8FHCTe9xLFZ2c/53lNBLktuGAkxHvUy/duYFVwlVklwmeflBCdaEY1PCAJQwACUMQAkDUMIAlDAAJQxACQNQwgCUMAAlLKGEJKdJ7pO8NX4Ih7U/WZvDb22XduumB/3zlU8fDy0FmHb62Sqg1qalgMfiQWbpU9C0UckiXLUIzyWczLsFth0GskQbG7yOKMnVnu2Mwu9N+IWEX0j4hYRfSPiFhF9I+IWEX0j4hYRfSPiFhF9ovv3uiNKg54TdUh7gnLD7+cXnhD1MKTwnLPxfOifszzoGKOHz39VM34qz0kEBAAAAAAAAAACrv+odI4YEcGqiHqEAAAAASUVORK5CYII="})}):null,(0,f.jsx)("div",{children:(0,f.jsx)("img",{className:v,src:s.currentUserData.photo||I})}),(0,f.jsx)("div",{className:U,children:s.currentUserData.userName})]})}),(0,f.jsx)("div",{className:s.currentUserId?o:g,onScroll:s=>{let e=s.currentTarget;Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<10?r(!0):r(!1)},children:(0,f.jsxs)("div",{className:_,children:[N,s.currentUserId?(0,f.jsx)(O,{addMessage:e=>{e&&s.sendMessage(s.currentUserId,e)},wsStatus:s.wsStatus}):null,(0,f.jsx)("div",{ref:e})]})})]}):(0,f.jsx)("div",{className:d})]})]})})),O=s=>(0,f.jsx)(Q.l0,{onSubmit:e=>{s.addMessage(e.newMessageBody)},children:e=>{let{handleSubmit:a,form:r}=e;return(0,f.jsxs)("form",{onSubmit:a,className:C,children:[(0,f.jsx)(Q.gN,{validate:k.C,placeholder:"Message",component:"textarea",name:"newMessageBody",className:N}),(0,f.jsx)("button",{disabled:"ready"!==s.wsStatus,onClick:()=>{a(),r.reset()},className:M,children:(0,f.jsx)("img",{className:E,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVR4nO3YIU8DMRgG4BIQEAQCi8KAQaJAYlEEi8QisUgsEovEIrELCjOBmJmeIiEhWSaWhyzZBQwBcu3ddfT5Ac33Jnd924ZQFEXRKXjGGVZCjnwa4hIbIdMAlTfcYCvkwPcmuMd+yDTAVz0cYyl0jb8Z4AKrIdMAlRGusJlrgMoYd9jNNUBligcc5Rrgq2aLUTrNFKP00haj5qQpRu3oRStG7RrULkasYRuHOJ0veD3f3x/xgtfEQUbJi7GhoOMuFGOMoNM2izFmgIOuDfaTd9xip2uDpfuJtauP87rbaBt6ORbZ7Cgx+yz3ag/dcIBsD3PD+YawnmTwSoLBs7zQTKMXz281Xjyx/bdnlX7t4oltkZ8WJ0mKJ7ZFel4fNlI8seEJJ1iOvnhRFMXC+QCjX9DRxtS7pQAAAABJRU5ErkJggg=="})})]})}}),T=F;var G=a(932);const K=(0,a(154).qC)((0,l.$j)((s=>({chatsData:s.dialogsReducer.chatsData,messagesData:s.dialogsReducer.messagesData,id:s.authReducer.data.id,wsStatus:s.dialogsReducer.wsStatus,currentUserId:s.dialogsReducer.currentUserId,currentUserData:s.dialogsReducer.currentUserData})),{startWsChannel:r.ig,stopWsChannel:r.FU,setCurrentUserData:r.OI,sendMessage:r.bG,setChats:r.Nv,setMessages:r.Z,setCurrentUserId:r.ui}),G.l)(T)}}]);
//# sourceMappingURL=726.ab6795e2.chunk.js.map